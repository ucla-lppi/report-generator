<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Heat Reports</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIi3yU6nU/yfZt7r9JZ67I6c69Ff+f47p6B8Jp0hXQ" crossorigin="anonymous">
    <!-- Google Font: Lexend -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-...your-integrity-hash..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: 'Lexend', sans-serif !important;
        }
        #map {
            height: 600px;
            width: 100%;
        }
        .county-list {
            margin-top: 20px;
        }
        .county-list ul {
            list-style-type: none;
            padding: 0;
        }
        .county-list li {
            display: inline-block;
            margin-right: 10px;
        }
    </style>
</head>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body {
            font-family: 'Lexend', sans-serif !important;
        }
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body class="container my-4">
    <h1 class="mb-3">Heat Reports</h1>
    <p>Click on a county on the map or scroll down to view the list!</p>
    <div id="map" class="mb-4"></div>
    <h2>County Reports</h2>
    <!-- Updated to use a Bootstrap List Group -->
    <ul class="list-group">
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Alameda</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Alameda_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Contra-Costa</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Contra_Costa_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Fresno</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Fresno_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Imperial</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Imperial_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Kern</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Kern_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
        <!-- Add additional counties in similar blocks -->
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Kings</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Kings_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
        <li class="list-group-item d-flex flex-wrap align-items-center gap-2">
            <span class="fw-bold">Los Angeles</span>:
            <a href="." class="btn btn-sm btn-primary"></a>
            <a href="." class="btn btn-sm btn-secondary"></a>
            <a href="pdfs/Los_Angeles_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
                <i class="bi bi-file-earmark-pdf"></i> PDF
            </a>
        </li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Madera</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Madera_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Merced</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Merced_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Monterey</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Monterey_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Orange</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Orange_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Riverside</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Riverside_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Sacramento</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Sacramento_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Santa Barbara</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Santa_Barbara_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Santa Clara</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Santa_Clara_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Santa Cruz</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Santa_Cruz_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">San Bernardino</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/San_Bernardino_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">San Diego</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/San_Diego_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">San Joaquin</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/San_Joaquin_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">San Mateo</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/San_Mateo_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Stanislaus</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Stanislaus_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Tulare</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Tulare_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
		<li class="list-group-item d-flex flex-wrap align-items-center gap-2">
			<span class="fw-bold">Ventura</span>:
			<a href="." class="btn btn-sm btn-primary"></a>
			<a href="." class="btn btn-sm btn-secondary"></a>
			<a href="pdfs/Ventura_airpollution.pdf" target="_blank" class="btn btn-sm btn-danger">
				<i class="bi bi-file-earmark-pdf"></i> PDF
			</a>
		</li>
        <!-- Repeat similar blocks for Madera, Merced, Monterey, Orange, Riversdie, Sacramento, etc. -->
    </ul>
    <!-- Maplibre JS -->
    <script src="https://cdn.jsdelivr.net/npm/maplibre-gl@1.15.2/dist/maplibre-gl.js"></script>
    <!-- Maplibre CSS -->
    <link href="https://cdn.jsdelivr.net/npm/maplibre-gl@1.15.2/dist/maplibre-gl.css" rel="stylesheet" />

    <script>
        // Initialize the map
        var map = new maplibregl.Map({
            container: 'map',
            style: 'https://demotiles.maplibre.org/style.json',
            center: [-119.4179, 36.7783],
            zoom: 5,
            interactive: false 
        });

        // Add navigation control (the +/- zoom buttons)
        map.addControl(new maplibregl.NavigationControl(), 'top-right');

        // Disable scroll zoom
        map.scrollZoom.disable();

        // Load GeoJSON data
        fetch('data/counties.geojson')
          .then(response => response.json())
          .then(data => {
            const validCounties = [
              'Alameda', 'Contra Costa', 'Fresno', 'Imperial', 'Kern', 'Kings', 'Los Angeles', 
              'Madera', 'Merced', 'Monterey', 'Orange', 'Riverside', 'Sacramento', 'Santa Barbara', 
              'Santa Clara', 'Santa Cruz', 'San Bernardino', 'San Diego', 'San Joaquin', 'San Mateo', 
              'Stanislaus', 'Tulare', 'Ventura'
            ];
            data.features = data.features.filter(feature => validCounties.includes(feature.properties.name));
        
            map.addSource('counties', {
              'type': 'geojson',
              'data': data
            });
        
            map.addLayer({
              'id': 'counties-layer',
              'type': 'fill',
              'source': 'counties',
              'layout': {},
              'paint': {
                'fill-color': '#888888',
                'fill-opacity': 0.4
              }
            });
        
            map.addLayer({
              'id': 'counties-borders',
              'type': 'line',
              'source': 'counties',
              'layout': {},
              'paint': {
                'line-color': '#000000',
                'line-width': 1
              }
            });
        
            // Add click events, popups etc.
            map.on('click', 'counties-layer', function (e) {
              var countyName = e.features[0].properties.name.replace(/ /g, '_');
              var popupContent = '<b>' + countyName + '</b><br>' +
                '<a href="."></a><br>' +
                '<a href="."></a><br>' +
                `<a href="https://ucla-lppi.github.io/report-generator/output/heatreports/pdfs/${countyName}_airpollution.pdf" target="_blank"><i class="bi bi-file-earmark-pdf"></i>PDF</a>`;
              new maplibregl.Popup()
                .setLngLat(e.lngLat)
                .setHTML(popupContent)
                .addTo(map);
            });
        
            map.on('mouseenter', 'counties-layer', function () {
              map.getCanvas().style.cursor = 'pointer';
            });
        
            map.on('mouseleave', 'counties-layer', function () {
              map.getCanvas().style.cursor = '';
            });
          });
        
        // Load California land boundary GeoJSON and add to map
        fetch('data/california_land_boundary.geojson')
          .then(response => response.json())
          .then(boundaryData => {
            map.addSource('california-boundary', {
              'type': 'geojson',
              'data': boundaryData
            });
        
            map.addLayer({
              'id': 'california-boundary-layer',
              'type': 'line',
              'source': 'california-boundary',
              'layout': {},
              'paint': {
                'line-color': '#FF00FF',
                'line-width': 2
              }
            });
          });
    </script>
</body>
</html>