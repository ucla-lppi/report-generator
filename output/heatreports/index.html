<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Heat Reports</title>
    <link href="https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-...your-integrity-hash..." crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        #map {
            height: 600px;
            width: 100%;
        }
        .county-list {
            margin-top: 20px;
        }
        .county-list ul {
            list-style-type: none;
            padding: 0;
        }
        .county-list li {
            display: inline-block;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>Heat Reports</h1>
    Click on county or scroll down for list!
    <div id="map"></div>
	<h2>County Reports</h2>
    <ul>
        <li>
            <a href="Alameda_page1.html">Alameda</a> | 
            <a href="Alameda_page2.html">page 2</a> | 
            <a href="pdfs/Alameda_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Contra_Costa_page1.html">Contra_Costa</a> | 
            <a href="Contra_Costa_page2.html">page 2</a> | 
            <a href="pdfs/Contra_Costa_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Fresno_page1.html">Fresno</a> | 
            <a href="Fresno_page2.html">page 2</a> | 
            <a href="pdfs/Fresno_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Imperial_page1.html">Imperial</a> | 
            <a href="Imperial_page2.html">page 2</a> | 
            <a href="pdfs/Imperial_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Kern_page1.html">Kern</a> | 
            <a href="Kern_page2.html">page 2</a> | 
            <a href="pdfs/Kern_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Kings_page1.html">Kings</a> | 
            <a href="Kings_page2.html">page 2</a> | 
            <a href="pdfs/Kings_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Los_Angeles_page1.html">Los_Angeles</a> | 
            <a href="Los_Angeles_page2.html">page 2</a> | 
            <a href="pdfs/Los_Angeles_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Madera_page1.html">Madera</a> | 
            <a href="Madera_page2.html">page 2</a> | 
            <a href="pdfs/Madera_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Merced_page1.html">Merced</a> | 
            <a href="Merced_page2.html">page 2</a> | 
            <a href="pdfs/Merced_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Monterey_page1.html">Monterey</a> | 
            <a href="Monterey_page2.html">page 2</a> | 
            <a href="pdfs/Monterey_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Orange_page1.html">Orange</a> | 
            <a href="Orange_page2.html">page 2</a> | 
            <a href="pdfs/Orange_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Riverside_page1.html">Riverside</a> | 
            <a href="Riverside_page2.html">page 2</a> | 
            <a href="pdfs/Riverside_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Sacramento_page1.html">Sacramento</a> | 
            <a href="Sacramento_page2.html">page 2</a> | 
            <a href="pdfs/Sacramento_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Santa_Barbara_page1.html">Santa_Barbara</a> | 
            <a href="Santa_Barbara_page2.html">page 2</a> | 
            <a href="pdfs/Santa_Barbara_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Santa_Clara_page1.html">Santa_Clara</a> | 
            <a href="Santa_Clara_page2.html">page 2</a> | 
            <a href="pdfs/Santa_Clara_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Santa_Cruz_page1.html">Santa_Cruz</a> | 
            <a href="Santa_Cruz_page2.html">page 2</a> | 
            <a href="pdfs/Santa_Cruz_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="San_Bernardino_page1.html">San_Bernardino</a> | 
            <a href="San_Bernardino_page2.html">page 2</a> | 
            <a href="pdfs/San_Bernardino_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="San_Diego_page1.html">San_Diego</a> | 
            <a href="San_Diego_page2.html">page 2</a> | 
            <a href="pdfs/San_Diego_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="San_Joaquin_page1.html">San_Joaquin</a> | 
            <a href="San_Joaquin_page2.html">page 2</a> | 
            <a href="pdfs/San_Joaquin_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="San_Mateo_page1.html">San_Mateo</a> | 
            <a href="San_Mateo_page2.html">page 2</a> | 
            <a href="pdfs/San_Mateo_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Stanislaus_page1.html">Stanislaus</a> | 
            <a href="Stanislaus_page2.html">page 2</a> | 
            <a href="pdfs/Stanislaus_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Tulare_page1.html">Tulare</a> | 
            <a href="Tulare_page2.html">page 2</a> | 
            <a href="pdfs/Tulare_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
        <li>
            <a href="Ventura_page1.html">Ventura</a> | 
            <a href="Ventura_page2.html">page 2</a> | 
            <a href="pdfs/Ventura_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>
        </li>
    </ul>
</div>
	<script src="https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js"></script>
	<script>
		// Initialize the map
		var map = new maplibregl.Map({
			container: 'map',
			style: 'https://demotiles.maplibre.org/style.json', // Map style to use
			center: [-119.4179, 36.7783], // Starting position [lng, lat]
			zoom: 5, // Starting zoom level
			interactive: false 
		});

		// Add navigation control (the +/- zoom buttons)
		map.addControl(new maplibregl.NavigationControl(), 'top-right');

		// Disable scroll zoom
		map.scrollZoom.disable();

		// Load GeoJSON data
// Inside map.on('load', function () { ... })

// Load counties data
fetch('data/counties.geojson')
  .then(response => response.json())
  .then(data => {
    const validCounties = [
      'Alameda', 'Contra Costa', 'Fresno', 'Imperial', 'Kern', 'Kings', 'Los Angeles', 'Madera',
      'Merced', 'Monterey', 'Orange', 'Riverside', 'Sacramento', 'Santa Barbara', 'Santa Clara',
      'Santa Cruz', 'San Bernardino', 'San Diego', 'San Joaquin', 'San Mateo', 'Stanislaus',
      'Tulare', 'Ventura'
    ];
    data.features = data.features.filter(feature => validCounties.includes(feature.properties.name));

    map.addSource('counties', {
      'type': 'geojson',
      'data': data
    });

    map.addLayer({
      'id': 'counties-layer',
      'type': 'fill',
      'source': 'counties',
      'layout': {},
      'paint': {
        'fill-color': '#888888',
        'fill-opacity': 0.4
      }
    });

    map.addLayer({
      'id': 'counties-borders',
      'type': 'line',
      'source': 'counties',
      'layout': {},
      'paint': {
        'line-color': '#000000',
        'line-width': 1
      }
    });

    // Add click events, popups etc.
    map.on('click', 'counties-layer', function (e) {
      var countyName = e.features[0].properties.name.replace(/ /g, '_');
      var popupContent = '<b>' + countyName + '</b><br>' +
        '<a href="https://ucla-lppi.github.io/report-generator/output/heatreports/' + countyName + '_page1.html">Page 1</a><br>' +
        '<a href="https://ucla-lppi.github.io/report-generator/output/heatreports/' + countyName + '_page2.html">Page 2</a>'
		`<a href="https://ucla-lppi.github.io/report-generator/output/heatreports/pdfs/${countyName}_extreme_heat.pdf" target="_blank">PDF<i class="fa-solid fa-file-pdf"></i></a>`;
      new maplibregl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(popupContent)
        .addTo(map);
    });

    map.on('mouseenter', 'counties-layer', function () {
      map.getCanvas().style.cursor = 'pointer';
    });

    map.on('mouseleave', 'counties-layer', function () {
      map.getCanvas().style.cursor = '';
    });
  });

// Load California land boundary GeoJSON and add to map
fetch('data/california_land_boundary.geojson')
  .then(response => response.json())
  .then(boundaryData => {
    map.addSource('california-boundary', {
      'type': 'geojson',
      'data': boundaryData
    });

    map.addLayer({
      'id': 'california-boundary-layer',
      'type': 'line',
      'source': 'california-boundary',
      'layout': {},
      'paint': {
        'line-color': '#FF00FF',
        'line-width': 2
      }
    });
  });
	</script>
</body>
</html>